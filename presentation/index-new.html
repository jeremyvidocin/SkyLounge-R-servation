<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyLounge Coworking - Revue Technique</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
        <div class="progress-text" id="progressText">1 / 12</div>
    </div>

    <!-- Navigation Dots -->
    <nav class="nav-dots" id="navDots"></nav>

    <!-- Slides Container -->
    <div class="slides-container" id="slidesContainer">

        <!-- ================================================================
             SLIDE 1: TITRE
             ================================================================ -->
        <section class="slide slide-title active" data-slide="1">
            <div class="slide-content">
                <div class="title-badge animate-in">
                    <span class="badge-icon">üìã</span>
                    <span>Revue Technique - Alternance L3 MIAGE</span>
                </div>
                <h1 class="main-title animate-in delay-1">
                    <span class="title-line">SkyLounge</span>
                    <span class="title-line gradient-text">R√©servation</span>
                </h1>
                <p class="subtitle animate-in delay-2">Syst√®me de booking coworking sur WordPress</p>
                <div class="title-meta animate-in delay-3">
                    <div class="meta-item">
                        <span class="meta-icon">üë§</span>
                        <span>J√©r√©my VIDOCIN</span>
                    </div>
                    <div class="meta-separator">‚Ä¢</div>
                    <div class="meta-item">
                        <span class="meta-icon">üìÖ</span>
                        <span>D√©cembre 2025</span>
                    </div>
                    <div class="meta-separator">‚Ä¢</div>
                    <div class="meta-item">
                        <span class="meta-icon">‚è±Ô∏è</span>
                        <span>45 min</span>
                    </div>
                </div>
                <div class="agenda-quick animate-in delay-4">
                    <div class="agenda-item-quick">1. Jira</div>
                    <div class="agenda-item-quick">2. Difficult√©s</div>
                    <div class="agenda-item-quick">3. Application</div>
                    <div class="agenda-item-quick">4. Code</div>
                </div>
            </div>
            <div class="slide-background">
                <div class="bg-gradient"></div>
                <div class="bg-grid"></div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 2: CONTEXTE PROJET
             ================================================================ -->
        <section class="slide slide-context" data-slide="2">
            <div class="slide-content">
                <div class="section-label animate-in">Introduction</div>
                <h2 class="slide-title animate-in delay-1">Contexte du Projet</h2>
                <div class="context-grid animate-in delay-2">
                    <div class="context-card">
                        <div class="card-icon">üéØ</div>
                        <h3>Objectif</h3>
                        <p>Syst√®me de r√©servation complet pour espaces de coworking avec paiement en ligne</p>
                    </div>
                    <div class="context-card">
                        <div class="card-icon">‚öôÔ∏è</div>
                        <h3>Stack Technique</h3>
                        <p>WordPress + WooCommerce + ACF + Code Snippets (14 modules PHP)</p>
                    </div>
                    <div class="context-card">
                        <div class="card-icon">üîí</div>
                        <h3>Contrainte Cl√©</h3>
                        <p>Budget 0‚Ç¨ plugins ‚Üí Solution 100% custom sans Amelia/Bookly</p>
                    </div>
                    <div class="context-card">
                        <div class="card-icon">üìä</div>
                        <h3>Livrables</h3>
                        <p>~400 KB de code PHP ‚Ä¢ 3 endpoints REST ‚Ä¢ Interface admin compl√®te</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 3: JIRA - ORGANISATION
             ================================================================ -->
        <section class="slide slide-jira" data-slide="3">
            <div class="slide-content">
                <div class="section-label animate-in">01 - Jira</div>
                <h2 class="slide-title animate-in delay-1">Organisation du Travail</h2>
                <p class="slide-subtitle animate-in delay-1">‚Üí Ouvrir Jira pour montrer les tickets en d√©tail</p>
                <div class="jira-overview animate-in delay-2">
                    <div class="jira-stats">
                        <div class="jira-stat">
                            <span class="stat-number">XX</span>
                            <span class="stat-label">Tickets cr√©√©s</span>
                        </div>
                        <div class="jira-stat">
                            <span class="stat-number">XX</span>
                            <span class="stat-label">Tickets termin√©s</span>
                        </div>
                        <div class="jira-stat">
                            <span class="stat-number">XX</span>
                            <span class="stat-label">Sprints</span>
                        </div>
                    </div>
                    <div class="jira-epics">
                        <h3>Epics / Grandes fonctionnalit√©s</h3>
                        <div class="epic-list">
                            <div class="epic-item">
                                <span class="epic-status done">‚úì</span>
                                <span class="epic-name">Calendrier de r√©servation frontend</span>
                            </div>
                            <div class="epic-item">
                                <span class="epic-status done">‚úì</span>
                                <span class="epic-name">Syst√®me anti-double booking (locks)</span>
                            </div>
                            <div class="epic-item">
                                <span class="epic-status done">‚úì</span>
                                <span class="epic-name">Int√©gration WooCommerce (paiement)</span>
                            </div>
                            <div class="epic-item">
                                <span class="epic-status done">‚úì</span>
                                <span class="epic-name">Interface admin (dashboard, colonnes)</span>
                            </div>
                            <div class="epic-item">
                                <span class="epic-status done">‚úì</span>
                                <span class="epic-name">G√©n√©ration contrats PDF</span>
                            </div>
                            <div class="epic-item">
                                <span class="epic-status done">‚úì</span>
                                <span class="epic-name">Conformit√© RGPD</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="jira-note animate-in delay-3">
                    <span class="note-icon">üí°</span>
                    <span>√Ä compl√©ter avec vos vraies donn√©es Jira lors de la pr√©sentation</span>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 4: JIRA - EXEMPLE TICKET
             ================================================================ -->
        <section class="slide slide-jira-ticket" data-slide="4">
            <div class="slide-content">
                <div class="section-label animate-in">01 - Jira</div>
                <h2 class="slide-title animate-in delay-1">Exemple de Ticket</h2>
                <p class="slide-subtitle animate-in delay-1">‚Üí Montrer un ticket r√©el dans Jira</p>
                <div class="ticket-example animate-in delay-2">
                    <div class="ticket-header">
                        <span class="ticket-type bug">üêõ Bug</span>
                        <span class="ticket-id">SKYLOUNGE-XX</span>
                    </div>
                    <h3 class="ticket-title">Double r√©servation possible sur le m√™me cr√©neau</h3>
                    <div class="ticket-details">
                        <div class="ticket-field">
                            <strong>Description :</strong>
                            <p>Deux utilisateurs peuvent r√©server le m√™me cr√©neau s'ils cliquent en m√™me temps.</p>
                        </div>
                        <div class="ticket-field">
                            <strong>Ma d√©marche :</strong>
                            <ol>
                                <li>Analyse du probl√®me (race condition)</li>
                                <li>Recherche de solutions (pessimistic locking, optimistic locking, mutex)</li>
                                <li>Choix technique : transients WordPress avec TTL</li>
                                <li>Impl√©mentation + tests</li>
                            </ol>
                        </div>
                        <div class="ticket-field">
                            <strong>Temps estim√© :</strong> X heures
                            <strong style="margin-left: 2rem;">Temps r√©el :</strong> X heures
                        </div>
                    </div>
                </div>
                <div class="ticket-note animate-in delay-3">
                    Ce ticket sera d√©taill√© dans la section "Difficult√©s"
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 5: DIFFICULT√âS - VUE D'ENSEMBLE
             ================================================================ -->
        <section class="slide slide-difficulties" data-slide="5">
            <div class="slide-content">
                <div class="section-label animate-in">02 - Difficult√©s</div>
                <h2 class="slide-title animate-in delay-1">Probl√®mes Rencontr√©s</h2>
                <div class="difficulties-grid animate-in delay-2">
                    <div class="difficulty-card critical">
                        <div class="difficulty-severity">üî¥ Critique</div>
                        <h3>Race Condition Double Booking</h3>
                        <p>Deux users r√©servent le m√™me cr√©neau simultan√©ment</p>
                        <div class="difficulty-solution">
                            <strong>‚Üí</strong> Syst√®me de locks avec transients WordPress
                        </div>
                    </div>
                    <div class="difficulty-card high">
                        <div class="difficulty-severity">üü† Important</div>
                        <h3>D√©synchronisation JSON/CPT</h3>
                        <p>Le cache JSON peut diverger des vraies r√©servations</p>
                        <div class="difficulty-solution">
                            <strong>‚Üí</strong> CRON quotidien de v√©rification + rebuild
                        </div>
                    </div>
                    <div class="difficulty-card medium">
                        <div class="difficulty-severity">üü° Moyen</div>
                        <h3>Guest Checkout WooCommerce</h3>
                        <p>Conserver les donn√©es de r√©servation sans compte</p>
                        <div class="difficulty-solution">
                            <strong>‚Üí</strong> Metadata sur order items + hooks personnalis√©s
                        </div>
                    </div>
                    <div class="difficulty-card medium">
                        <div class="difficulty-severity">üü° Moyen</div>
                        <h3>G√©n√©ration PDF sans plugin payant</h3>
                        <p>Cr√©er des contrats professionnels</p>
                        <div class="difficulty-solution">
                            <strong>‚Üí</strong> Template HTML + fallback WPO WCPDF
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 6: DIFFICULT√âS - DEEP DIVE LOCKS
             ================================================================ -->
        <section class="slide slide-locks-detail" data-slide="6">
            <div class="slide-content">
                <div class="section-label animate-in">02 - Difficult√©s</div>
                <h2 class="slide-title animate-in delay-1">Focus : Anti-Double Booking</h2>
                <div class="problem-solution-layout animate-in delay-2">
                    <div class="problem-side">
                        <h3>‚ùå Le Probl√®me</h3>
                        <div class="timeline-scenario">
                            <div class="timeline-row">
                                <span class="time">14:00:00</span>
                                <span class="user-a">User A s√©lectionne 15 janv</span>
                                <span class="user-b">-</span>
                            </div>
                            <div class="timeline-row">
                                <span class="time">14:00:01</span>
                                <span class="user-a">-</span>
                                <span class="user-b">User B s√©lectionne 15 janv</span>
                            </div>
                            <div class="timeline-row">
                                <span class="time">14:00:25</span>
                                <span class="user-a">-</span>
                                <span class="user-b">User B paie ‚úì</span>
                            </div>
                            <div class="timeline-row conflict">
                                <span class="time">14:00:30</span>
                                <span class="user-a">User A paie ‚úì</span>
                                <span class="user-b">-</span>
                            </div>
                            <div class="timeline-result">üí• 2 r√©servations pour 1 place !</div>
                        </div>
                    </div>
                    <div class="solution-side">
                        <h3>‚úÖ Ma Solution</h3>
                        <div class="solution-steps">
                            <div class="solution-step">
                                <span class="step-num">1</span>
                                <span>Recherche : mutex, pessimistic/optimistic locking</span>
                            </div>
                            <div class="solution-step">
                                <span class="step-num">2</span>
                                <span>Choix : WordPress Transients (cl√©-valeur avec TTL)</span>
                            </div>
                            <div class="solution-step">
                                <span class="step-num">3</span>
                                <span>Impl√©mentation : lock cr√©√© AVANT ajout panier</span>
                            </div>
                            <div class="solution-step">
                                <span class="step-num">4</span>
                                <span>TTL adaptatif : 20 min (bureau) / 5 min (salle)</span>
                            </div>
                        </div>
                        <div class="code-preview">
                            <pre><code>// TTL selon capacit√©
function cw_get_lock_ttl($offre_id) {
    $capacity = get_field('capacite_max', $offre_id);
    return ($capacity <= 1) 
        ? 20 * MINUTE_IN_SECONDS  // Bureau unique
        : 5 * MINUTE_IN_SECONDS;  // Salle partag√©e
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 7: APPLICATION - ARCHITECTURE
             ================================================================ -->
        <section class="slide slide-architecture" data-slide="7">
            <div class="slide-content">
                <div class="section-label animate-in">03 - Application</div>
                <h2 class="slide-title animate-in delay-1">Architecture Globale</h2>
                <p class="slide-subtitle animate-in delay-1">‚Üí D√©mo live de l'application apr√®s cette slide</p>
                <div class="architecture-diagram animate-in delay-2">
                    <div class="arch-layer frontend">
                        <div class="layer-label">FRONTEND</div>
                        <div class="layer-content">
                            <div class="arch-box">üìÖ Calendrier JS</div>
                            <div class="arch-box">üí∞ Calcul Prix</div>
                            <div class="arch-box">üõí Checkout WC</div>
                        </div>
                    </div>
                    <div class="arch-arrow">
                        <span>REST API</span>
                    </div>
                    <div class="arch-layer backend">
                        <div class="layer-label">BOOKING ENGINE (PHP)</div>
                        <div class="layer-content">
                            <div class="arch-box highlight">üîí Locks (transients)</div>
                            <div class="arch-box">üìä Disponibilit√©s</div>
                            <div class="arch-box">‚úÖ Validation</div>
                        </div>
                    </div>
                    <div class="arch-arrow">
                        <span>CRUD</span>
                    </div>
                    <div class="arch-layer data">
                        <div class="layer-label">DATA</div>
                        <div class="layer-content">
                            <div class="arch-box">üì¶ CPT R√©servation</div>
                            <div class="arch-box">üõçÔ∏è WC Orders</div>
                            <div class="arch-box">‚ö° JSON Cache</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 8: APPLICATION - MODULES
             ================================================================ -->
        <section class="slide slide-modules" data-slide="8">
            <div class="slide-content">
                <div class="section-label animate-in">03 - Application</div>
                <h2 class="slide-title animate-in delay-1">14 Modules PHP</h2>
                <div class="modules-table animate-in delay-2">
                    <table>
                        <thead>
                            <tr>
                                <th>Priorit√©</th>
                                <th>Module</th>
                                <th>Responsabilit√©</th>
                                <th>Taille</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="module-core">
                                <td>P1</td>
                                <td><code>coworking-config</code></td>
                                <td>Configuration centrale, constantes</td>
                                <td>9.8 KB</td>
                            </tr>
                            <tr class="module-core">
                                <td>P2</td>
                                <td><code>booking-engine-v2</code></td>
                                <td>Locks, cart-add, validation</td>
                                <td>42.5 KB</td>
                            </tr>
                            <tr class="module-core">
                                <td>P3</td>
                                <td><code>systeme-disponibilite</code></td>
                                <td>API REST disponibilit√©s</td>
                                <td>13.3 KB</td>
                            </tr>
                            <tr class="module-frontend">
                                <td>P4</td>
                                <td><code>calendrier-v2</code></td>
                                <td>Frontend JS complet</td>
                                <td>33.2 KB</td>
                            </tr>
                            <tr class="module-wc">
                                <td>P5</td>
                                <td><code>wc-order-complete</code></td>
                                <td>Hook apr√®s paiement</td>
                                <td>3.5 KB</td>
                            </tr>
                            <tr class="module-admin">
                                <td>P6-8</td>
                                <td><code>admin-*</code></td>
                                <td>Colonnes, metabox, dashboard</td>
                                <td>128.7 KB</td>
                            </tr>
                            <tr class="module-other">
                                <td>P9-14</td>
                                <td><code>cron, notif, pdf, rgpd...</code></td>
                                <td>Features additionnelles</td>
                                <td>~70 KB</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modules-note animate-in delay-3">
                    Total : ~400 KB de code PHP ‚Ä¢ Architecture modulaire via Code Snippets
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 9: CODE - BOOKING ENGINE
             ================================================================ -->
        <section class="slide slide-code" data-slide="9">
            <div class="slide-content">
                <div class="section-label animate-in">04 - Code</div>
                <h2 class="slide-title animate-in delay-1">booking-engine-v2.php</h2>
                <p class="slide-subtitle animate-in delay-1">‚Üí Ouvrir le fichier dans VS Code pour d√©tails</p>
                <div class="code-highlights animate-in delay-2">
                    <div class="code-section">
                        <h3>üìç Ligne ~65 : TTL adaptatif</h3>
                        <pre><code>function cw_get_lock_ttl($offre_id) {
    $capacity = (int) get_field('capacite_max', $offre_id);
    if ($capacity <= 1) {
        return 20 * MINUTE_IN_SECONDS; // Bureau unique
    } else {
        return 5 * MINUTE_IN_SECONDS;  // Espace partag√©
    }
}</code></pre>
                        <p class="code-explain">Logique m√©tier : un bureau priv√© est unique, on laisse plus de temps</p>
                    </div>
                    <div class="code-section">
                        <h3>üìç Ligne ~220 : V√©rification disponibilit√©</h3>
                        <pre><code>function coworking_check_availability_with_locks($offre_id, $start, $end) {
    // 1. R√©cup√©rer capacit√© max
    // 2. Compter r√©servations confirm√©es (JSON)
    // 3. Compter locks temporaires (transients)
    // 4. Retourner available + fail_date si besoin
}</code></pre>
                        <p class="code-explain">Fonction CRITIQUE : v√©rifie r√©servations ET locks</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 10: CODE - CALENDRIER
             ================================================================ -->
        <section class="slide slide-code" data-slide="10">
            <div class="slide-content">
                <div class="section-label animate-in">04 - Code</div>
                <h2 class="slide-title animate-in delay-1">calendrier-v2.php</h2>
                <p class="slide-subtitle animate-in delay-1">‚Üí Ouvrir le fichier dans VS Code pour d√©tails</p>
                <div class="code-highlights animate-in delay-2">
                    <div class="code-section">
                        <h3>üé® Architecture</h3>
                        <ul class="code-points">
                            <li><strong>Vanilla JS</strong> - Pas de React/Vue, 100% natif</li>
                            <li><strong>Shortcode</strong> - [coworking_calendar] injecte tout</li>
                            <li><strong>CSS Variables</strong> - Th√®me coh√©rent SkyLounge</li>
                            <li><strong>REST API</strong> - Appels async vers /availability et /cart-add</li>
                        </ul>
                    </div>
                    <div class="code-section">
                        <h3>üìç Points cl√©s √† montrer</h3>
                        <ul class="code-points">
                            <li>G√©n√©ration du calendrier mensuel (grid CSS)</li>
                            <li>Calcul dynamique des prix selon formule</li>
                            <li>Gestion des √©tats (disponible, occup√©, s√©lectionn√©)</li>
                            <li>Appel REST pour ajout panier + redirection checkout</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 11: CODE - WC ORDER COMPLETE
             ================================================================ -->
        <section class="slide slide-code" data-slide="11">
            <div class="slide-content">
                <div class="section-label animate-in">04 - Code</div>
                <h2 class="slide-title animate-in delay-1">wc-order-complete.php</h2>
                <p class="slide-subtitle animate-in delay-1">‚Üí Hook WooCommerce apr√®s paiement valid√©</p>
                <div class="code-highlights animate-in delay-2">
                    <div class="code-section">
                        <h3>üîÑ Flow apr√®s paiement</h3>
                        <div class="flow-mini">
                            <div class="flow-step-mini">Paiement OK</div>
                            <div class="flow-arrow-mini">‚Üí</div>
                            <div class="flow-step-mini">Hook d√©clench√©</div>
                            <div class="flow-arrow-mini">‚Üí</div>
                            <div class="flow-step-mini">Cr√©er CPT</div>
                            <div class="flow-arrow-mini">‚Üí</div>
                            <div class="flow-step-mini">Mettre √† jour JSON</div>
                            <div class="flow-arrow-mini">‚Üí</div>
                            <div class="flow-step-mini">Supprimer lock</div>
                        </div>
                    </div>
                    <div class="code-section">
                        <h3>üìç Le hook WordPress</h3>
                        <pre><code>add_action('woocommerce_order_status_completed', function($order_id) {
    $order = wc_get_order($order_id);
    foreach ($order->get_items() as $item) {
        // R√©cup√©rer les meta de r√©servation
        // Cr√©er le CPT cw_reservation
        // Mettre √† jour reservations_json de l'offre
        // Supprimer le lock correspondant
    }
});</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================================================================
             SLIDE 12: CONCLUSION
             ================================================================ -->
        <section class="slide slide-conclusion" data-slide="12">
            <div class="slide-content">
                <div class="section-label animate-in">Conclusion</div>
                <h2 class="slide-title animate-in delay-1">Ce que j'ai appris</h2>
                <div class="learnings-grid animate-in delay-2">
                    <div class="learning-item">
                        <span class="learning-icon">üèóÔ∏è</span>
                        <h3>Architecture Modulaire</h3>
                        <p>D√©couper en snippets ind√©pendants = maintenabilit√©</p>
                    </div>
                    <div class="learning-item">
                        <span class="learning-icon">‚ö°</span>
                        <h3>Race Conditions</h3>
                        <p>Toujours penser multi-utilisateurs, m√™me sur WordPress</p>
                    </div>
                    <div class="learning-item">
                        <span class="learning-icon">üîå</span>
                        <h3>Hooks WordPress</h3>
                        <p>Actions/Filters pour √©tendre sans modifier le core</p>
                    </div>
                    <div class="learning-item">
                        <span class="learning-icon">üåê</span>
                        <h3>REST API</h3>
                        <p>Communication frontend/backend propre et d√©coupl√©e</p>
                    </div>
                    <div class="learning-item">
                        <span class="learning-icon">üîê</span>
                        <h3>RGPD en pratique</h3>
                        <p>Consentement, anonymisation IP, r√©tention 3 ans</p>
                    </div>
                    <div class="learning-item">
                        <span class="learning-icon">üîß</span>
                        <h3>Debugging Production</h3>
                        <p>CRON de maintenance = syst√®me qui s'auto-r√©pare</p>
                    </div>
                </div>
                <div class="questions-prompt animate-in delay-3">
                    <h2>Questions ?</h2>
                </div>
            </div>
        </section>

    </div>

    <!-- Keyboard shortcuts help -->
    <div class="shortcuts-help" id="shortcutsHelp">
        <div class="shortcuts-content">
            <h3>Raccourcis clavier</h3>
            <div class="shortcuts-grid">
                <div class="shortcut-group">
                    <h4>Navigation</h4>
                    <div class="shortcut"><kbd>‚Üí</kbd> <kbd>Espace</kbd> Slide suivante</div>
                    <div class="shortcut"><kbd>‚Üê</kbd> Slide pr√©c√©dente</div>
                    <div class="shortcut"><kbd>1-9</kbd> Aller √† la slide N</div>
                </div>
                <div class="shortcut-group">
                    <h4>Pr√©sentation</h4>
                    <div class="shortcut"><kbd>F</kbd> Plein √©cran</div>
                    <div class="shortcut"><kbd>?</kbd> Afficher cette aide</div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
